import{r as j,j as e,bw as et,y as tt,m as H,e as z,c as L,b as S,d as ve,g as we,z as st}from"./index-DirEgLJ3.js";import{H as rt}from"./Header-DIQgaVcq.js";import{T as ot,G as m,B as nt,E as it,S as at,C as D,a as de}from"./BookOutlined-CyKtBOfx.js";import{a as lt,g as ct,q as X,h as p,u as dt,s as P,c as Ne,b as xt,T as l,m as mt,d as ht,p as pt,B as i}from"./Box-BEO0Rqom.js";import{G as ut}from"./GridLoader-B4dWDiCY.js";import{n as yt,k as Se,f as C,a as A,A as Ce,C as k,B as W}from"./dividerClasses-Bl9wkvy7.js";import{D as xe,I as gt,a as ft,b as jt,c as bt,d as vt}from"./Divider-BA9nD0hR.js";import{G as wt,S as y}from"./Groups-CK3yZ5or.js";import{S as me,B as ze,F as ke,K as St,a as Ct,C as zt,L as Ae,b as he,T as kt,c as pe}from"./Link-Cy4t7L5W.js";import{c as At}from"./clsx-B-dksMZM.js";function _t(s){return ct("MuiLink",s)}const It=lt("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),Lt=({theme:s,ownerState:u})=>{const o=u.color,R=X(s,`palette.${o}.main`,!1)||X(s,`palette.${o}`,!1)||u.color,r=X(s,`palette.${o}.mainChannel`)||X(s,`palette.${o}Channel`);return"vars"in s&&r?`rgba(${r} / 0.4)`:p(R,.4)},_e={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Rt=s=>{const{classes:u,component:o,focusVisible:R,underline:r}=s,T={root:["root",`underline${Ne(r)}`,o==="button"&&"button",R&&"focusVisible"]};return xt(T,_t,u)},$t=P(l,{name:"MuiLink",slot:"Root",overridesResolver:(s,u)=>{const{ownerState:o}=s;return[u.root,u[`underline${Ne(o.underline)}`],o.component==="button"&&u.button]}})(mt(({theme:s})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:u,ownerState:o})=>u==="always"&&o.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},...Object.entries(s.palette).filter(ht()).map(([u])=>({props:{underline:"always",color:u},style:{"--Link-underlineColor":s.vars?`rgba(${s.vars.palette[u].mainChannel} / 0.4)`:p(s.palette[u].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":s.vars?`rgba(${s.vars.palette.text.primaryChannel} / 0.4)`:p(s.palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":s.vars?`rgba(${s.vars.palette.text.secondaryChannel} / 0.4)`:p(s.palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(s.vars||s).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${It.focusVisible}`]:{outline:"auto"}}}]}))),Bt=j.forwardRef(function(u,o){const R=dt({props:u,name:"MuiLink"}),r=yt(),{className:T,color:_="primary",component:F="a",onBlur:I,onFocus:O,TypographyClasses:K,underline:Q="always",variant:J="inherit",sx:$,...ee}=R,[Y,w]=j.useState(!1),q=V=>{Se(V.target)||w(!1),I&&I(V)},te=V=>{Se(V.target)&&w(!0),O&&O(V)},E={...R,color:_,component:F,focusVisible:Y,underline:Q,variant:J},se=Rt(E);return e.jsx($t,{color:_,className:At(se.root,T),classes:K,component:F,onBlur:q,onFocus:te,ref:o,ownerState:E,variant:J,...ee,sx:[..._e[_]===void 0?[{color:_}]:[],...Array.isArray($)?$:[$]],style:{...ee.style,...Q==="always"&&_!=="inherit"&&!_e[_]&&{"--Link-underlineColor":Lt({theme:r,ownerState:E})}}})}),Ie=C(e.jsx("path",{d:"m21.41 11.58-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58s1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41s-.23-1.06-.59-1.42M5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7"}),"LocalOffer"),Pt=C(e.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm-1 4 6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2zm-1 7h5.5L14 6.5z"}),"FileCopy"),Vt=C(e.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),Le=C(e.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"}),"ArrowDownward"),Re=C(e.jsx("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward"),Nt=C([e.jsx("path",{d:"M19 5v14H5V5zm0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"},"0"),e.jsx("path",{d:"M14 17H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"},"1")],"ArticleOutlined"),$e=C(e.jsx("path",{d:"M12 7V3H2v18h20V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8zm-2-8h-2v2h2zm0 4h-2v2h2z"}),"BusinessOutlined"),Be=C(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info"),Mt=C(e.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn"),Pe=C([e.jsx("path",{d:"M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1m0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5z"},"0"),e.jsx("path",{d:"M17.5 10.5c.88 0 1.73.09 2.5.26V9.24c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99M13 12.49v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26V11.9c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.3-4.5.83m4.5 1.84c-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26v-1.52c-.79-.16-1.64-.24-2.5-.24"},"1")],"MenuBook"),Wt=C(e.jsx("path",{d:"M12 3 1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9zm6.82 6L12 12.72 5.18 9 12 5.28zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73z"}),"SchoolOutlined"),Ve=C(e.jsx("path",{d:"M14 17H4v2h10zm6-8H4v2h16zM4 15h16v-2H4zM4 5v2h16V5z"}),"Subject"),d=pt({palette:{primary:{main:"rgb(29, 78, 216)",light:"rgb(96, 128, 228)",dark:"rgb(20, 54, 151)"},secondary:{main:"rgb(29, 78, 216)",light:"rgb(96, 128, 228)",dark:"rgb(20, 54, 151)"}}}),Ht=P(A)(({theme:s})=>({marginBottom:s.spacing(2),boxShadow:"0 2px 8px rgba(0,0,0,0.05)",borderRadius:8,transition:"box-shadow 0.3s",overflow:"hidden","&:hover":{boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}})),ue=P(k)(({theme:s,clickable:u})=>({margin:s.spacing(.5),fontSize:"0.75rem",height:24,cursor:u?"pointer":"default","&:hover":u?{backgroundColor:p(s.palette.primary.main,.1),borderColor:s.palette.primary.main}:{}})),ye=P(A)(({theme:s})=>({backgroundColor:p(s.palette.primary.light,.06),padding:s.spacing(1.5),textAlign:"center",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",boxShadow:"none",borderRadius:8})),Tt=P(i)(({theme:s})=>({display:"flex",alignItems:"center",marginBottom:s.spacing(2),padding:s.spacing(1),borderRadius:s.spacing(1),transition:"background-color 0.2s",cursor:"pointer","&:hover":{backgroundColor:p(s.palette.primary.light,.1)}})),G=P(i)(({theme:s})=>({marginBottom:s.spacing(3),borderRadius:8,overflow:"hidden"})),Z=P(l)(({theme:s})=>({display:"flex",alignItems:"center",gap:s.spacing(1),marginBottom:s.spacing(2),color:s.palette.primary.main,borderBottom:`1px solid ${p(s.palette.primary.main,.2)}`,paddingBottom:s.spacing(1)})),Ft=P(W)(({theme:s})=>({width:"100%",marginTop:s.spacing(1),borderRadius:s.spacing(1),textTransform:"none",backgroundColor:p(s.palette.primary.light,.1),color:s.palette.primary.main,"&:hover":{backgroundColor:p(s.palette.primary.light,.2)}})),Zt=()=>{const{scholar_id:s}=et(),u=tt(),[o,R]=j.useState(null),[r,T]=j.useState(null),[_,F]=j.useState([]),[I,O]=j.useState([]),[K,Q]=j.useState([]),[J,$]=j.useState(!0),[ee,Y]=j.useState(!1),[w,q]=j.useState({field:"citations",order:"desc"}),[te,E]=j.useState({}),[se,V]=j.useState({}),[re,Me]=j.useState(5),[We,He]=j.useState(null),[Te,ge]=j.useState(!1),N=j.useRef(!0);j.useEffect(()=>(N.current=!0,$(!0),Y(!1),(async()=>{if(!s){console.error("Scholar ID not found in URL"),$(!1);return}try{console.log("Fetching data for scholar_id:",s);let c=null,n="faculty_computing",x="dept_cs";const M=await z(L(S,"academicAdmins"));for(const f of M.docs){const g=f.data();if(g.scholar_id===s||g.scholarId===s){console.log("Found academic admin with matching scholar_id:",g),c={...g,id:f.id,scholar_id:g.scholar_id||g.scholarId||s,college:g.college||n,department:g.department||x},n=c.college,x=c.department;break}}if(!c){const f=await z(L(S,"users"));for(const g of f.docs){const v=g.data();if(v.scholar_id===s){console.log("Found user with matching scholar_id:",v),c={...v,id:g.id},v.college&&(n=v.college),v.department&&(x=v.department);break}}}c&&T(c),console.log(`Looking for researcher data at: colleges/${n}/departments/${x}/faculty_members/${s}`);const a=ve(S,`colleges/${n}/departments/${x}/faculty_members/${s}`),h=await we(a);if(h.exists()){console.log("Found researcher document data");const f=h.data();R(f);const g=L(S,`colleges/${n}/departments/${x}/faculty_members/${s}/publications`);console.log(`Fetching publications from: ${g.path}`);const B=(await z(g)).docs.map(U=>({id:U.id,...U.data(),authors:U.data().authors||f.name||""}));console.log(`Found ${B.length} publications`),F(B),f.coauthors&&O(f.coauthors)}else{console.log("Researcher document not found. Searching in all colleges/departments...");let f=null,g=[],v=null;const B=await z(L(S,"colleges"));for(const U of B.docs){if(!N.current)return;const ie=U.id,qe=await z(L(S,`colleges/${ie}/departments`));for(const Xe of qe.docs){if(!N.current)return;const be=Xe.id,ae=ve(S,`colleges/${ie}/departments/${be}/faculty_members/${s}`);console.log(`Checking alternate path: ${ae.path}`);const le=await we(ae);if(le.exists()){console.log(`Found researcher data at alternate path: ${ae.path}`),f=le,v=le.data();const Ze=L(S,`colleges/${ie}/departments/${be}/faculty_members/${s}/publications`);g=(await z(Ze)).docs.map(ce=>({id:ce.id,...ce.data(),authors:ce.data().authors||v.name||""}));break}}if(f)break}if(!N.current)return;f&&v?(R(v),F(g),v.coauthors&&O(v.coauthors)):console.error("Researcher data not found in any college/department")}const b=st(S,"faculty_members"),ne=(await z(b)).docs.map(f=>({id:f.id,department:f.ref.parent.parent.id,...f.data()}));if(!N.current)return;Q(ne),Y(!0)}catch(c){console.error("Error fetching researcher data:",c)}finally{N.current&&$(!1)}})(),()=>{N.current=!1}),[s]);const Fe=()=>_.sort((t,c)=>w.field==="citations"?w.order==="asc"?(t.num_citations||0)-(c.num_citations||0):(c.num_citations||0)-(t.num_citations||0):w.field==="year"?w.order==="asc"?(t.pub_year||0)-(c.pub_year||0):(c.pub_year||0)-(t.pub_year||0):0),fe=t=>{w.field===t?q(c=>({field:t,order:c.order==="asc"?"desc":"asc"})):q({field:t,order:"desc"})},Oe=t=>{E(c=>({...c,[t]:!c[t]}))},Ee=t=>{V(c=>({...c,[t]:!c[t]}))},Ue=async t=>{if(!t)return null;const c=t.trim().replace(/[.*()[\]{}]/g,"").toLowerCase();if(I.length>0){const n=I.find(x=>x.name&&x.name.toLowerCase().includes(c)||c.includes(x.name.toLowerCase()));if(n!=null&&n.scholar_id)return n.scholar_id}if(K.length>0){const n=K.find(x=>x.name&&x.name.toLowerCase().includes(c)||c.includes(x.name.toLowerCase()));if(n!=null&&n.scholar_id)return n.scholar_id}try{const x=(await z(L(S,"users"))).docs.map(a=>a.data()).find(a=>{const h=(a.firstName+" "+a.lastName).toLowerCase();return h.includes(c)||c.includes(h)});if(x!=null&&x.scholar_id)return x.scholar_id;const M=await z(L(S,"colleges"));for(const a of M.docs){const h=a.id,b=await z(L(S,`colleges/${h}/departments`));for(const je of b.docs){const ne=je.id,g=(await z(L(S,`colleges/${h}/departments/${ne}/faculty_members`))).docs.find(v=>{const B=v.data();return B.name&&(B.name.toLowerCase().includes(c)||c.includes(B.name.toLowerCase()))});if(g)return g.id}}return null}catch(n){return console.error("Error searching for scholar:",n),null}},oe=async t=>{if(!t)return;if(o!=null&&o.name&&(o.name.toLowerCase().includes(t.toLowerCase())||t.toLowerCase().includes(o.name.toLowerCase()))){u(`/profile/${s}`);return}$(!0);const c=await Ue(t);c?(console.log(`Found scholar ID for ${t}: ${c}`),u(`/profile/${c}`)):console.log(`No scholar ID found for ${t}`),$(!1)},De=t=>{t&&t.scholar_id?u(`/profile/${t.scholar_id}`):console.log("No scholar_id found for coauthor")},Ge=()=>{Me(t=>Math.min(t+5,I.length))},Ke=t=>{He(t),ge(!0)},Qe=()=>e.jsxs(m,{container:!0,spacing:3,children:[e.jsx(m,{item:!0,xs:12,children:e.jsxs(A,{children:[e.jsxs(i,{sx:{p:3,display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2},children:[e.jsx(y,{variant:"circular",width:120,height:120}),e.jsxs(i,{sx:{width:"100%"},children:[e.jsx(y,{variant:"text",width:"60%",height:40}),e.jsxs(i,{sx:{mt:2},children:[e.jsx(y,{variant:"text",width:"80%",height:25}),e.jsx(y,{variant:"text",width:"70%",height:25}),e.jsx(y,{variant:"text",width:"60%",height:25}),e.jsx(y,{variant:"text",width:"65%",height:25})]})]})]}),e.jsx(xe,{}),e.jsxs(i,{sx:{p:2},children:[e.jsx(y,{variant:"text",width:"40%",height:30}),e.jsxs(i,{sx:{display:"flex",gap:1,mt:1},children:[e.jsx(y,{variant:"rounded",width:80,height:24}),e.jsx(y,{variant:"rounded",width:100,height:24}),e.jsx(y,{variant:"rounded",width:90,height:24})]})]})]})}),e.jsx(m,{item:!0,xs:12,children:e.jsx(A,{children:e.jsxs(i,{sx:{p:2},children:[e.jsx(y,{variant:"text",width:"50%",height:30}),e.jsxs(i,{sx:{mt:2,display:"flex",justifyContent:"space-between"},children:[e.jsx(y,{variant:"rounded",width:"30%",height:80}),e.jsx(y,{variant:"rounded",width:"30%",height:80}),e.jsx(y,{variant:"rounded",width:"30%",height:80})]})]})})}),e.jsx(m,{item:!0,xs:12,md:8,children:e.jsx(A,{children:e.jsxs(i,{sx:{p:2},children:[e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",mb:2,alignItems:"center"},children:[e.jsx(y,{variant:"text",width:"40%",height:30}),e.jsx(y,{variant:"rounded",width:120,height:36})]}),[1,2,3].map(t=>e.jsx(i,{sx:{mb:3},children:e.jsx(y,{variant:"rectangular",width:"100%",height:200,sx:{borderRadius:2}})},t))]})})}),e.jsx(m,{item:!0,xs:12,md:4,children:e.jsx(A,{children:e.jsxs(i,{sx:{p:2},children:[e.jsx(y,{variant:"text",width:"60%",height:30}),[1,2,3].map(t=>e.jsxs(i,{sx:{display:"flex",alignItems:"center",my:2},children:[e.jsx(y,{variant:"circular",width:40,height:40,sx:{mr:2}}),e.jsxs(i,{children:[e.jsx(y,{variant:"text",width:120,height:20}),e.jsx(y,{variant:"text",width:180,height:16})]})]},t))]})})})]}),Je=({open:t,onClose:c,publication:n})=>{const[x,M]=j.useState(0);if(!n)return null;const a=(h,b)=>{M(b)};return e.jsxs(ft,{open:t,onClose:c,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:3,boxShadow:"0 10px 40px rgba(0,0,0,0.1)"}},children:[e.jsxs(jt,{sx:{borderBottom:"1px solid",borderColor:"divider",bgcolor:p(d.palette.primary.main,.05)},children:[e.jsx(l,{variant:"h6",color:"primary",sx:{fontWeight:600},children:n.title}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mt:1},children:typeof n.authors=="string"?n.authors:Array.isArray(n.authors)?n.authors.join(", "):"Unknown Authors"})]}),e.jsxs(bt,{children:[e.jsxs(kt,{value:x,onChange:a,sx:{mb:3,mt:1},variant:"scrollable",scrollButtons:"auto",textColor:"primary",indicatorColor:"primary",children:[e.jsx(pe,{label:"Details",icon:e.jsx(Be,{}),iconPosition:"start"}),e.jsx(pe,{label:"Abstract",icon:e.jsx(Ve,{}),iconPosition:"start"}),n.keywords&&e.jsx(pe,{label:"Keywords",icon:e.jsx(Ie,{}),iconPosition:"start"})]}),x===0&&e.jsxs(m,{container:!0,spacing:3,children:[e.jsxs(m,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:600,color:"primary.main"},children:"Publication Information"}),e.jsxs(me,{spacing:2,sx:{mb:3},children:[n.pub_year&&e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(de,{color:"primary",sx:{fontSize:"1.1rem"}}),e.jsxs(l,{variant:"body2",children:["Year: ",n.pub_year]})]}),n.journal_name&&e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(Pe,{color:"primary",sx:{fontSize:"1.1rem"}}),e.jsxs(l,{variant:"body2",children:["Journal: ",n.journal_name]})]}),n.num_citations!==void 0&&e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(ke,{color:"primary",sx:{fontSize:"1.1rem"}}),e.jsxs(l,{variant:"body2",children:["Citations: ",n.num_citations]})]}),n.doi&&e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(Ae,{color:"primary",sx:{fontSize:"1.1rem"}}),e.jsxs(l,{variant:"body2",sx:{textDecoration:"underline",cursor:"pointer","&:hover":{color:"primary.main"}},onClick:()=>window.open(`https://doi.org/${n.doi}`,"_blank"),children:["DOI: ",n.doi]})]})]})]}),e.jsxs(m,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:600,color:"primary.main"},children:"Additional Information"}),e.jsxs(me,{spacing:2,children:[n.publisher&&e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(ze,{color:"primary",sx:{fontSize:"1.1rem"}}),e.jsxs(l,{variant:"body2",children:["Publisher: ",n.publisher]})]}),n.pub_type&&e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(Pt,{color:"primary",sx:{fontSize:"1.1rem"}}),e.jsxs(l,{variant:"body2",children:["Type: ",n.pub_type]})]})]})]}),e.jsx(m,{item:!0,xs:12,children:n.pub_url&&e.jsx(W,{variant:"contained",color:"primary",startIcon:e.jsx(he,{}),href:n.pub_url,target:"_blank",rel:"noopener",sx:{mt:2,borderRadius:8,textTransform:"none"},children:"View Full Publication"})})]}),x===1&&e.jsxs(i,{children:[e.jsx(l,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:600,color:"primary.main"},children:"Abstract"}),n.abstract?e.jsx(l,{variant:"body2",paragraph:!0,sx:{lineHeight:1.7},children:n.abstract}):e.jsx(l,{variant:"body2",color:"text.secondary",children:"No abstract available for this publication."})]}),x===2&&n.keywords&&e.jsxs(i,{children:[e.jsx(l,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:600,color:"primary.main"},children:"Keywords"}),e.jsx(i,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:typeof n.keywords=="string"?n.keywords.split(/[,;]/).map((h,b)=>e.jsx(k,{label:h.trim(),size:"small",sx:{fontSize:"0.75rem",borderRadius:8,bgcolor:p(d.palette.primary.main,.08),color:d.palette.primary.main}},b)):Array.isArray(n.keywords)?n.keywords.map((h,b)=>e.jsx(k,{label:h,size:"small",sx:{fontSize:"0.75rem",borderRadius:8,bgcolor:p(d.palette.primary.main,.08),color:d.palette.primary.main}},b)):e.jsx(l,{variant:"body2",color:"text.secondary",children:"No keywords available."})})]})]}),e.jsx(vt,{sx:{p:2,borderTop:"1px solid",borderColor:"divider"},children:e.jsx(W,{onClick:c,variant:"outlined",sx:{borderRadius:8},children:"Close"})})]})},Ye=({publication:t})=>{const c=te[t.id]||!1,n=se[t.id]||!1,x=t.abstract&&t.abstract.length>200,M=Object.keys(t).filter(a=>{const h=t[a];return h&&typeof h!="function"&&!["title","pub_year","num_citations","authors","cites_per_year","cites_id","id"].includes(a)});return e.jsx(Ht,{children:e.jsxs(D,{children:[e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs(i,{sx:{width:"100%"},children:[e.jsx(l,{variant:"h6",sx:{mb:1,fontWeight:500,color:d.palette.primary.main,fontSize:{xs:"1rem",sm:"1.1rem",md:"1.25rem"},cursor:"pointer","&:hover":{textDecoration:"underline"}},onClick:()=>Ke(t),children:t.title||"Untitled Publication"}),e.jsx(me,{direction:"row",spacing:1,sx:{mb:2,flexWrap:"wrap",gap:.5},children:t.authors&&(typeof t.authors=="string"?t.authors.split(/[,;]\s*|(?:\s+and\s+)/).filter(a=>a.trim()).map((a,h)=>e.jsx(ue,{label:a.trim(),size:"small",variant:"outlined",clickable:!0,onClick:b=>{b.stopPropagation(),oe(a.trim())},sx:{borderColor:d.palette.primary.main,"&:hover":{backgroundColor:p(d.palette.primary.main,.1),color:d.palette.primary.dark}}},h)):Array.isArray(t.authors)?t.authors.filter(a=>a).map((a,h)=>e.jsx(ue,{label:a,size:"small",variant:"outlined",clickable:!0,onClick:b=>{b.stopPropagation(),oe(a)},sx:{borderColor:d.palette.primary.main,"&:hover":{backgroundColor:p(d.palette.primary.main,.1),color:d.palette.primary.dark}}},h)):e.jsx(ue,{label:t.authors,size:"small",variant:"outlined",clickable:!0,onClick:a=>{a.stopPropagation(),oe(t.authors)},sx:{borderColor:d.palette.primary.main,"&:hover":{backgroundColor:p(d.palette.primary.main,.1),color:d.palette.primary.dark}}}))}),e.jsxs(i,{sx:{display:"flex",gap:2,flexWrap:"wrap",mb:1},children:[t.pub_year&&e.jsx(k,{icon:e.jsx(de,{fontSize:"small"}),label:t.pub_year,size:"small",sx:{bgcolor:p(d.palette.primary.main,.1),color:"text.primary",fontSize:"0.75rem"}}),t.publisher&&e.jsx(k,{icon:e.jsx(ze,{fontSize:"small"}),label:t.publisher,size:"small",sx:{color:"text.secondary",fontSize:"0.75rem"},variant:"outlined"}),t.journal_name&&e.jsx(k,{icon:e.jsx(Pe,{fontSize:"small"}),label:t.journal_name,size:"small",sx:{color:"text.secondary",fontSize:"0.75rem"},variant:"outlined"}),t.num_citations!==void 0&&e.jsx(k,{icon:e.jsx(ke,{fontSize:"small"}),label:`${t.num_citations} Citations`,size:"small",sx:{color:d.palette.primary.main,fontSize:"0.75rem",fontWeight:500},variant:"outlined"})]}),t.abstract&&e.jsxs(i,{sx:{mt:2},children:[e.jsxs(l,{variant:"subtitle2",color:"primary",sx:{mb:.5,display:"flex",alignItems:"center",gap:.5},children:[e.jsx(Ve,{fontSize:"small"}),"Abstract"]}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{...x&&!c?{display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"}:{}},children:t.abstract}),x&&e.jsx(W,{size:"small",onClick:()=>Oe(t.id),sx:{mt:1,fontSize:"0.75rem"},children:c?"Show Less":"Show More"})]})]}),e.jsx(gt,{"aria-label":"expand publication",size:"small",onClick:()=>Ee(t.id),sx:{ml:1},children:n?e.jsx(St,{}):e.jsx(Ct,{})})]}),e.jsx(zt,{in:n,timeout:"auto",unmountOnExit:!0,children:e.jsxs(i,{sx:{mt:2},children:[e.jsx(xe,{sx:{mb:2}}),e.jsx(m,{container:!0,spacing:2,children:M.map(a=>a!=="abstract"&&e.jsxs(m,{item:!0,xs:12,sm:6,children:[e.jsxs(l,{variant:"subtitle2",color:"primary",sx:{display:"flex",alignItems:"center",gap:.5},children:[a==="keywords"&&e.jsx(Ie,{fontSize:"small"}),a==="doi"&&e.jsx(Ae,{fontSize:"small"}),a==="pub_url"&&e.jsx(he,{fontSize:"small"}),!["keywords","doi","pub_url"].includes(a)&&e.jsx(Be,{fontSize:"small"}),a.replace(/_/g," ").toUpperCase()]}),e.jsx(i,{sx:{mt:.5},children:a==="keywords"?e.jsx(i,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:typeof t[a]=="string"?t[a].split(/[,;]/).map((h,b)=>e.jsx(k,{label:h.trim(),size:"small",sx:{fontSize:"0.7rem",bgcolor:p(d.palette.primary.main,.08),color:d.palette.primary.main}},b)):Array.isArray(t[a])?t[a].map((h,b)=>e.jsx(k,{label:h,size:"small",sx:{fontSize:"0.7rem",bgcolor:p(d.palette.primary.main,.08),color:d.palette.primary.main}},b)):e.jsx(l,{variant:"body2",children:t[a]})}):a==="pub_url"||a==="doi"?e.jsx(Bt,{href:a==="doi"?`https://doi.org/${t[a]}`:t[a],target:"_blank",rel:"noopener",variant:"body2",sx:{color:d.palette.primary.main,wordBreak:"break-all"},children:t[a]}):e.jsx(l,{variant:"body2",children:typeof t[a]=="object"?JSON.stringify(t[a]):t[a]})})]},a))}),e.jsx(i,{sx:{mt:2,display:"flex",justifyContent:"flex-end"},children:t.pub_url&&e.jsx(W,{variant:"outlined",size:"small",startIcon:e.jsx(he,{}),href:t.pub_url,target:"_blank",rel:"noopener",sx:{borderRadius:8,textTransform:"none"},children:"View Publication"})})]})})]})})};return e.jsx(ot,{theme:d,children:e.jsxs("div",{className:"flex flex-col h-screen w-full bg-white",children:[e.jsx("div",{className:"sticky top-0 z-50 w-full bg-white shadow-md",style:{position:"sticky",top:0},children:e.jsx(rt,{title:"Researcher Profile"})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:J?e.jsxs("div",{className:"p-4 lg:p-8",children:[e.jsx("div",{className:"flex justify-center items-center mb-6",children:e.jsx(ut,{size:20,color:"#4da7d0"})}),e.jsx(Qe,{})]}):e.jsx(H.div,{className:"p-4 lg:p-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs(m,{container:!0,spacing:4,children:[e.jsx(m,{item:!0,xs:12,children:e.jsx(H.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsx(G,{children:e.jsxs(A,{elevation:1,children:[e.jsxs(i,{sx:{bgcolor:p(d.palette.primary.main,.04),p:{xs:2,sm:3},display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"center",sm:"flex-start"},borderBottom:"1px solid rgba(0, 0, 0, 0.08)"},children:[e.jsx(Ce,{alt:"Researcher Profile Picture",src:(o==null?void 0:o.url_picture)||"/default-avatar.png",sx:{width:{xs:100,sm:120},height:{xs:100,sm:120},border:"3px solid white",boxShadow:"0 4px 8px rgba(0,0,0,0.1)",mb:{xs:2,sm:0},mr:{sm:3}}}),e.jsxs(i,{children:[e.jsxs(l,{variant:"h5",gutterBottom:!0,sx:{color:d.palette.primary.main,fontSize:{xs:"1.3rem",sm:"1.5rem"}},children:[r!=null&&r.firstName&&(r!=null&&r.lastName)?`${r.firstName} ${r.lastName}`:(o==null?void 0:o.name)||"Researcher",(r==null?void 0:r.isAcademicAdmin)&&e.jsx(k,{label:"Academic Admin",size:"small",color:"primary",sx:{ml:1,fontSize:"0.65rem",height:20,verticalAlign:"middle"}})]}),e.jsxs(i,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(nt,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Affiliation:"})," ",(o==null?void 0:o.affiliation)||(r==null?void 0:r.college)||"Not provided"]})]}),e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Mt,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Institution:"})," ",(o==null?void 0:o.institution)||(r==null?void 0:r.department)||"Not provided"]})]}),e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(it,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Email:"})," ",(r==null?void 0:r.email)||"Not provided"]})]}),e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(at,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Scholar ID:"})," ",(o==null?void 0:o.scholar_id)||(r==null?void 0:r.scholar_id)||"Not provided"]})]}),(r==null?void 0:r.isAcademicAdmin)&&(r==null?void 0:r.college)&&e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Wt,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"College:"})," ",r.college]})]}),(r==null?void 0:r.isAcademicAdmin)&&(r==null?void 0:r.department)&&e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx($e,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Department:"})," ",r.department]})]})]})]})]}),e.jsxs(i,{sx:{p:{xs:2,sm:3}},children:[e.jsx(l,{variant:"subtitle1",fontWeight:"medium",gutterBottom:!0,children:"Research Interests"}),e.jsx(i,{sx:{display:"flex",flexWrap:"wrap",gap:1,minHeight:32},children:o!=null&&o.interests&&o.interests.length>0?o.interests.map((t,c)=>e.jsx(k,{label:t,size:"small",sx:{bgcolor:p(d.palette.primary.main,.1),color:d.palette.primary.main,borderRadius:"8px",fontSize:"0.75rem"}},c)):e.jsx(l,{variant:"body2",color:"text.secondary",sx:{p:1,bgcolor:"rgba(0,0,0,0.02)",borderRadius:1,width:"100%",textAlign:"center"},children:"No research interests provided"})})]})]})})})}),e.jsx(m,{item:!0,xs:12,children:e.jsx(H.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsx(G,{children:e.jsx(A,{elevation:1,children:e.jsxs(D,{children:[e.jsxs(Z,{variant:"subtitle1",gutterBottom:!0,fontWeight:"medium",children:[e.jsx(de,{fontSize:"small"}),"Citation Metrics"]}),e.jsxs(m,{container:!0,spacing:2,children:[e.jsx(m,{item:!0,xs:12,sm:4,children:e.jsxs(ye,{children:[e.jsx(l,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.75rem"},children:"H-index"}),e.jsx(l,{variant:"h6",color:d.palette.primary.main,fontWeight:"bold",children:(o==null?void 0:o.hindex)||"N/A"}),e.jsxs(l,{variant:"caption",color:"text.secondary",children:["5 year: ",(o==null?void 0:o.hindex5y)||"N/A"]})]})}),e.jsx(m,{item:!0,xs:12,sm:4,children:e.jsxs(ye,{children:[e.jsx(l,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.75rem"},children:"i10-index"}),e.jsx(l,{variant:"h6",color:d.palette.primary.main,fontWeight:"bold",children:(o==null?void 0:o.i10index)||"N/A"}),e.jsxs(l,{variant:"caption",color:"text.secondary",children:["5 year: ",(o==null?void 0:o.i10index5y)||"N/A"]})]})}),e.jsx(m,{item:!0,xs:12,sm:4,children:e.jsxs(ye,{children:[e.jsx(l,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.75rem"},children:"Total Citations"}),e.jsx(l,{variant:"h6",color:d.palette.primary.main,fontWeight:"bold",children:(o==null?void 0:o.citedby)||"N/A"})]})})]})]})})})})}),(r==null?void 0:r.isAcademicAdmin)&&e.jsx(m,{item:!0,xs:12,children:e.jsx(H.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.45},children:e.jsx(G,{children:e.jsx(A,{elevation:1,children:e.jsxs(D,{children:[e.jsxs(Z,{variant:"subtitle1",gutterBottom:!0,fontWeight:"medium",children:[e.jsx($e,{fontSize:"small"}),"Academic Admin Information"]}),e.jsxs(m,{container:!0,spacing:2,children:[e.jsx(m,{item:!0,xs:12,sm:6,children:e.jsxs(i,{sx:{p:2,bgcolor:p(d.palette.primary.light,.06),borderRadius:2},children:[e.jsx(l,{variant:"subtitle2",color:"primary.main",gutterBottom:!0,children:"Administrative Role"}),e.jsx(l,{variant:"body2",children:r!=null&&r.department?`Department Admin (${r.department})`:r!=null&&r.college?`College Admin (${r.college})`:"Academic Administrator"})]})}),e.jsx(m,{item:!0,xs:12,sm:6,children:e.jsxs(i,{sx:{p:2,bgcolor:p(d.palette.primary.light,.06),borderRadius:2},children:[e.jsx(l,{variant:"subtitle2",color:"primary.main",gutterBottom:!0,children:"Affiliated Institution"}),e.jsx(l,{variant:"body2",children:(r==null?void 0:r.college)||"Not specified"})]})})]})]})})})})}),e.jsxs(m,{container:!0,item:!0,xs:12,spacing:4,children:[e.jsx(m,{item:!0,xs:12,md:8,children:e.jsx(H.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsx(G,{children:e.jsx(A,{elevation:1,children:e.jsxs(D,{children:[e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(Z,{variant:"subtitle1",gutterBottom:!0,fontWeight:"medium",sx:{mb:0},children:[e.jsx(Nt,{fontSize:"small"}),"Publications (",_.length,")"]}),e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(l,{variant:"body2",sx:{mr:1},children:"Sort by:"}),e.jsxs(i,{sx:{display:"flex",alignItems:"center",border:"1px solid",borderColor:"divider",borderRadius:1,overflow:"hidden"},children:[e.jsx(W,{size:"small",onClick:()=>fe("year"),sx:{px:.5,color:w.field==="year"?"primary.main":"text.secondary",borderRadius:0,fontWeight:w.field==="year"?"bold":"normal",textTransform:"none",fontSize:"0.75rem"},endIcon:w.field==="year"?w.order==="asc"?e.jsx(Re,{fontSize:"small"}):e.jsx(Le,{fontSize:"small"}):null,children:"Year"}),e.jsx(xe,{orientation:"vertical",flexItem:!0}),e.jsx(W,{size:"small",onClick:()=>fe("citations"),sx:{px:1.5,color:w.field==="citations"?"primary.main":"text.secondary",borderRadius:0,fontWeight:w.field==="citations"?"bold":"normal",textTransform:"none",fontSize:"0.75rem"},endIcon:w.field==="citations"?w.order==="asc"?e.jsx(Re,{fontSize:"small"}):e.jsx(Le,{fontSize:"small"}):null,children:"Citations"})]})]})]}),_.length>0?e.jsx(i,{children:Fe().map((t,c)=>e.jsx(Ye,{publication:t},c))}):e.jsx(i,{sx:{py:4,display:"flex",justifyContent:"center",alignItems:"center",bgcolor:p(d.palette.primary.main,.04),borderRadius:2},children:e.jsx(l,{variant:"body1",color:"text.secondary",children:"No publications found for this researcher"})})]})})})})}),e.jsx(m,{item:!0,xs:12,md:4,children:I.length>0&&e.jsx(H.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsx(G,{children:e.jsx(A,{elevation:1,children:e.jsxs(D,{children:[e.jsxs(Z,{variant:"subtitle1",gutterBottom:!0,fontWeight:"medium",children:[e.jsx(wt,{fontSize:"small"}),"Co-authors"]}),e.jsxs(i,{children:[I.slice(0,re).map((t,c)=>e.jsxs(Tt,{onClick:()=>De(t),children:[e.jsx(Ce,{alt:t.name,src:"/default-avatar.png",sx:{width:36,height:36,mr:1.5}}),e.jsxs(i,{children:[e.jsx(l,{variant:"body2",fontWeight:"medium",children:t.name}),e.jsx(l,{variant:"caption",color:"text.secondary",children:t.affiliation})]})]},c)),re<I.length&&e.jsxs(Ft,{startIcon:e.jsx(Vt,{fontSize:"small"}),onClick:Ge,children:["Load More (",I.length-re," more)"]})]})]})})})})})]})]})})}),e.jsx(Je,{open:Te,onClose:()=>ge(!1),publication:We})]})})};export{Zt as default};
